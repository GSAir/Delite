<html>
  <head>
    <meta content='text/html;charset=UTF-8' http-equiv='Content-Type'>
    <title>Delite &mdash; Source</title>
    <style type='text/css'>
      @import 'css/default.css';
      @import 'css/syntax.css';
    </style>
    <style media='print' type='text/css'>
      @import 'css/print.css';
    </style>
    <meta content='Delite documentation' name='subject'>
    <!-- <link href='images/favicon.png' rel='shortcut icon'> -->
  </head>
  <body>
    <div id='outer'>
      <div id='header'>
        <div class='home'><a href='http://stanford-ppl.github.com/Delite/' title="Delite">Delite</a></div>
      </div>
      <div id='menu'>
        <ol>
          <li>Start Here
            <ol>
              <li><a href='index.html'>Welcome</a></li>
              <li><a href="faq.html">FAQ</a></li>
              <!--
              <li><a href="myfirstdsl.html">My First DSL</a></li>
              <li><a href="performance.html">Performance</a></li>
              <li><a href="tests.html">Tests</a></li>
              <li><a href="troubleshooting.html">Troubleshooting</a></li>
              -->              
              <li><a href="publications.html">Publications</a></li>
            </ol>
          </li>
          <li>Getting it
            <ol>
            <!--
              <li><a href='releases.html'>Releases</a></li>
              <li><a href='snapshots.html'>Snapshots</a></li>
            -->
              <li><a href='source.html'>Source</a></li>
              <li><a href='license.html'>License</a></li>
            </ol>
          </li>
          <li>DSLs
            <ol>
              <li><a href='optiml/index.html'>OptiML</a></li>
              <li><a href='optiql/index.html'>OptiQL</a></li>
              <li><a href='optigraph/index.html'>OptiGraph</a></li>
            </ol>
          </li>  
          <li>Applications
            <ol>
              <li><a href='optiml/neural_network.html' >Deep Learning</a></li>
            </ol>
          </li>
          <!--
          <li>Reference
            <ol>
              <li><a href='api/0.3/index.html'>ScalaDoc API</a></li>
              <li>&nbsp;</li>
              <li><a href='sponsors.html'>Sponsors</a></li>
              <li class="logo"><a href="http://ppl.stanford.edu"><img width="110" alt="Stanford Pervasive Parallelism Lab" src='images/ppl_logo_small.png'></a></li>
            </ol>
          </li>
          -->
        </ol>
      </div>
      <div id='content'> 
        <h1 id='title_getting the source'>Getting the source</h1>
        <p>If your system has <code>git</code>, the best way to get the source code is to clone this repository.</p>
<div class="highlight"><pre><code class="bash">git clone https://github.com/stanford-ppl/hyperdsl.git</code></pre></div>
<p>This repository contains the latest stable versions of the LMS, Delite, and Forge repositories.  See the repository README for futher information on initializing the repository and compiling the source.</p>
<p>Delite is released under the new <span class="caps">BSD</span> <a href="license.html">license</a>.</p>
<p>The best way to build Delite currently is to follow the <a href='optiml/getting_started.html'>getting started guide for the OptiML DSL</a>. We will provide standalone directions for Delite (with instructions for
setting up a IDEA/Eclipse project using scala-virtualized) as soon as they are ready and stable.</p>
<p></p>
<!--
<h1 id="manual">Building from source</h2>

<p>IDEA may occasionally fail to compile your Delite projects depending on bugs in the IDEA Scala plugin or the scala-virtualized compiler. Use sbt as a backup compile tool. Setup instructions are below.</p>

<p>
<h2>Dependencies</h2> 
   
  <h3>IDE</h3> 
   
  <ul> 
    <li> 
    <a href="http://www.jetbrains.com/idea/download/">IDEA IntelliJ</a>. You may want to configure the memory parameters in the VM options for IDEA, e.g. increase max heap size if you encounter internal compiler errors (to do that, adjust the *.vmoptions file that resides next to IDEA executable in the installation folder)</li> 
    <li>
    <a href="http://confluence.jetbrains.net/display/SCA/Scala+Plugin+for+IntelliJ+IDEA">IDEA Scala plugin</a></li> 
  </ul><h3>Git</h3> 
   
  <ul> 
    <li><a href="http://code.google.com/p/msysgit/">Git for Windows</a></li> 
    <li>We have found Git works best on Windows with <code>autocrlf</code> and <code>filemode</code> disabled. Place these options either in your <a href="http://stackoverflow.com/questions/1475252/when-you-set-a-global-configuration-option-for-git-on-windows-where-does-it-get">global git config</a> or the <abbr title="the &quot;.git/config&quot; file in your repository">per repository git config</abbr>
    <pre><code>[core]
filemode = false
autocrlf = false</code></pre> 
    </li>
  </ul><h3>Ant</h3> 
   
  <ul> 
    <li><a href="http://ant.apache.org/">Ant</a></li>
    <li>If you have troubles compiling <code>scala-virtualized</code>, you may have to download and install <a href="http://mvnrepository.com/artifact/org.apache.ant/ant-nodeps">ant-nodeps</a></li> 
  </ul>
  
  <h3>GUI Git Client for Windows</h3> 
   
  <ul> 
    <li><a href="http://code.google.com/p/tortoisegit/">TortoiseGit</a></li> 
  </ul>
  
  <h3>Virtualized Scala</h3> 
   
  <ul> 
    <li><a href="http://github.com/TiarkRompf/scala-virtualized">Virtualized Scala</a></li> 
    <li>Compile virtualized-scala using <code>ant fastdist</code> 
    </li> 
  </ul><h3>Virtualization Light Modular Staging library</h3> 
   
  <ul> 
    <li><a href="http://github.com/TiarkRompf/virtualization-lms-core">Virtualization LMS Core</a></li> 
  </ul><h3>Simple Build Tool</h3> 
   
  <ul> 
    <li><a href="http://code.google.com/p/simple-build-tool/">Simple Build Tool</a></li> 
    <li>You will want to create some kind of launcher for sbt. See sbt <a href="http://code.google.com/p/simple-build-tool/wiki/Setup">setup instructions</a>.</li> 
    <li>You may want to increase the memory available for sbt by adding something like <code>-Xmx1024M</code> to the java options when launching sbt</li> 
  </ul>
  
  <h2>SBT setup instructions</h2> 
  <p>
  <b>SBT instructions depend on the branch of Delite that you are using.</b> Instructions for the 'optiml-alpha' branch are available <a href="optiml/getting_started.html">here</a>.
  </p><p>
  SBT instructions for the 'develop' branch follow:
  </p>
  <ol> 
    <li><p>Ensure <code>scala-virtualized</code> is built by running <code>ant fastdist</code> in the <code>scala-virtualized</code> directory. If you have troubles compiling <code>scala-virtualized</code>, you may have to download and install <a href="http://mvnrepository.com/artifact/org.apache.ant/ant-nodeps">ant-nodeps</a>.</p></li> 
    <li><p>Build <code>virtualization-lms-core</code> by running the <code>sbt</code> command <code>publish-local</code>.</p></li> 
    <li> 
    <p>Create a <code>local.properties</code> from the sample <code>local.properties.sample</code> file inside the <code>virtualization-lms-core</code> folder with the following lines. Select the appropriate line based on your system and replace with appropriate paths. Absolute paths must be used if the <code>scala-virtualized</code> directory is outside of the project.</p> 
     
    <pre><code>#Project local properties
# Windows:
scala.virtualized.home=C:/ppl/scala-virtualized/dists/latest
# Unix:
scala.virtualized.home=/ppl/scala-virtualized/dists/latest</code></pre> 
    </li>
    <p>Create a <code>delite.properties</code> file from the sample <code>delite.properties.sample</code> inside the <code>Delite</code> folder with the following lines. Replace with appropriate paths. Absolute paths must be used if the <code>scala-virtualized</code> directory is outside of either project.</p> 
     
    <pre><code># Delite project properties
[delite]
# Location of Scala virtualized
scala.virtualized.home=/ppl/scala-virtualized/dists/latest

# Location of Scala installation
scala.vanilla.home=/usr/share/scala/scala-2.8.1

# Location of Java installation
java.home=/usr/lib/jvm/java-7-sun/

# Location of application data
apps.data=/ppl/delite/data

# Location of ICC
intel.icc=/opt/intel/bin
# Location of MKL libraries one level above the mkl folder, with Intel librarys under lib
intel.mkl=/opt/intel

# Location of CUDA installation
nvidia.cuda=/usr/local/cuda

# Location of virtualization lms core
libs.lms.home=/ppl/virtualization-lms-core
# Location of the runtime
runtime.classes=runtime/target/scala_2.8.1/classes
tests.verbose=true</code></pre> 
    </li> 
    <li><p>You should be able to run <code>sbt</code> from the Delite directory.</p></li> 
    <li><p>To build Delite framework, first update dependencies by running the <code>sbt</code> command <code>update</code> and then compile the project using <code>sbt</code> command <code>compile</code>.</p></li> 
    <li><p>To build Delite runtime, run <code>sbt</code> from the runtime subdirectory of the Delite directory and issue the same <code>sbt</code> commands as described above for Delite framework.</p></li> 
  </ol><h2>IDEA project setup instructions</h2> 
   
  <p>Until we have a project file checked into the repository and a standardized directory layout, you will have to create the project yourself.</p> 
   
  <h3>Short and sweet IDEA setup instructions</h3> 
   
  <ol> 
    <li>Build <code>scala-virtualized</code> by running <code>ant fastdist.</code> 
    </li> 
    <li>Create a new project (selecting from existing sources) with the <code>Project Files</code> location set to the <code>Delite</code> directory. Do not create a <code>src</code> directory.</li> 
    <li>Add a Project Library <code>scala-virtualized</code> with Classes <code>scala-compiler.jar</code> and <code>scala-library.jar</code>. These are found under <code>scala-virtualized/dists/latest/lib</code>.
    </li> 
    <li>Add modules from scratch, with directories set to <code>Delite/dsls/optiml</code>, <code>Delite/framework</code>, <code>Delite/runtime</code>, <code>Delite/tests</code>, <code>virtualization-lms-core</code>.
    </li> 
    <li>Add Scala facets to each module, with compiler library <code>scala-virtualized/dists/latest/lib/scala-compiler.jar</code>.
    </li> 
    <li>Add the project library dependency <code>scala-virtualized</code> to all modules.</li>
    <li> 
    Add module dependencies as follows:
     
    <p> <code>framework</code> depends on <code>virtualization-lms-core</code></p> 
     
    <p> <code>optiml</code> depends on <code>framework</code> and <code>virtualization-lms-core</code></p> 
     
    <p> <code>runtime</code> only depends on <code>scala</code> (the virtualized scala compiler can be used but is not required)</p> 
     
    <p> <code>tests</code> depends on <code>framework</code>, <code>optiml</code>, and <code>virtualization-lms-core</code></p> 
     
    <p> <code>virtualization-lms-core</code> only depends on <code>scala-virtualized</code></p>
    <p></p> 
    </li> 
    <li>Be sure to check the "Export" checkbox for all dependencies in Dependencies grid.</li> 
    <li>Test the project structure with <code>Build</code> -&gt; <code>Make Project</code>.</li> 
  </ol><h3>Step by step</h3> 
   
  <ol> 
    <li>Build <code>scala-virtualized</code> by running <code>ant fastdist</code> in the <code>scala-virtualized</code> directory. If you have troubles compiling <code>scala-virtualized</code>, you may have to download and install <a href="http://mvnrepository.com/artifact/org.apache.ant/ant-nodeps">ant-nodeps</a>.</li> 
    <li>Open up <code>IDEA</code>.</li> 
    <li>Go to <code>File</code> -&gt; <code>New Project</code>.</li> 
    <li>Select <code>Create Java project from existing sources</code>.</li> 
    <li>Name the project <code>Delite</code> or something similar.</li> 
    <li>Select the project files location as the <code>Delite</code> repository you just downloaded. For example: <code>C:\Code\PPL\Delite</code></li> 
    <li>Select <code>Do not create source directory</code>.</li> 
    <li>Continue pressing next through the libraries dialog. If it asks for a JDK, add a JDK to the project.</li> 
    <li>Go to <code>File</code> -&gt; <code>Project Structure</code>.</li> 
    <li>Select <code>Libraries</code> under <code>-Project Settings-</code></li> 
    <li>Click the <code>+</code> (add) button.</li> 
    <li>Name the library <code>scala-virtualized</code> or something similar.</li> 
    <li>Add the new library to any modules you have already defined.</li> 
    <li>Click <code>Attach Classes...</code></li> 
    <li>Browse to the <code>lib</code> directory under the <code>scala-virtualized/dist/latest</code> directory, and add <code>scala-compiler.jar</code> and <code>scala-library.jar</code>.</li> 
    <li>Create the project modules.</li> 
    <li>Select <code>Modules</code> under <code>-Project Settings-</code></li> 
    <li>Click the <code>Add</code> button, then click <code>Module</code>.</li> 
    <li>Select <code>Create module from scratch</code>.</li> 
    <li>It will ask you for the module path and name. Click ... (browse) on content root.</li> 
    <li>Select the content directory. Let's start with <code>Delite/dsls/optiml</code>.</li> 
    <li>
    <code>IDEA</code> should automatically fill in the data for you. Click <code>Next</code>. 
    </li> 
    <li> 
    <code>IDEA</code> should have automatically selected <code>Create source directory</code>. Click <code>Next</code>.
    </li> 
    <li>Do not select a desired technology. Click <code>Finish</code>.</li> 
    <li>Select your new module and either right click -&gt; <code>New</code> -&gt; <code>Scala</code>, or click <code>+</code> (add) -&gt; <code>New</code> -&gt; <code>Scala</code></li> 
    <li>Select the <code>Scala</code> facet that appears.</li> 
    <li>Add a new Compiler plugin for each module. This should be under <code>scala-virtualized/dists/latest/lib/scala-compiler.jar</code>.
    </li> 
    <li>Select <code>scala-virtualized</code> under <code>Compiler library</code>. If nothing is under <code>Compiler library</code>, click <code>OK</code> on the <code>Project Structure</code> dialog and open up the project structure dialog again.</li> 
    <li>Create new modules for <code>Delite/framework</code>, <code>Delite/runtime</code>, <code>Delite/tests</code>, and <code>virtualization-lms-core</code>.</li> 
    <li>Now add dependencies. Click on a module, say <code>framework</code>, and click <code>Dependencies</code>.</li> 
    <li>Add the project library <code>scala-virtualized</code>.</li> 
    <li>Add the module dependency <code>virtualization-lms-core</code>.</li> 
    <li> 
	Add module dependencies as follows:
     
    <p> <code>framework</code> depends on <code>virtualization-lms-core</code></p> 
     
    <p> <code>optiml</code> depends on <code>framework</code> and <code>virtualization-lms-core</code></p> 
     
    <p> <code>runtime</code> only depends on <code>scala</code> (the virtualized scala compiler can be used but is not required)</p> 
     
    <p> <code>tests</code> depends on <code>framework</code>, <code>optiml</code>, and <code>virtualization-lms-core</code></p> 
    <p></p>
    </li> 
    <li>Be sure to check the "Export" checkbox for all dependencies in <code>Dependencies</code> grid for all modules in <code>Project Settings</code> -&gt; <code>Modules</code> dialog.</li>
    <li>You should be able to build successfully with <code>Build</code> -&gt; <code>Make Project</code></li> 
  </ol><h2>Testing</h2> 
   
  <p><code>sbt</code> will automatically pick up any tests in the <code>tests/src</code> directory of any project or subproject. Currently it is configured with <a href="http://www.scalatest.org/">ScalaTest</a>, which supports many types of tests, including JUnit.</p> 
   
  <p>Test resources can be added under the <code>tests/resources</code> directory under <code>Delite</code> or any sub-project. These files will be added onto the classpath and be included in the test jar.</p> 
   
  <p>An example test can be found under <code>tests/src/BasicTest.scala</code>. It tests a basic Scala class and resource loading. Test output comparison can then be done by loading up the resource as a stream and comparing it to whatever output is generated.</p></div></div>
-->
    </div> 
    <div id='footer'>Copyright &copy; 2012</div>
    </div>
  </body>
</html>
